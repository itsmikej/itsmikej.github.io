---
layout: default
title:  "TCP报文首部格式"
author: itsmikej
category: TCP/IP
---

TCP的传送的数据单元是报文段，格式如下：

![TCP报文首部格式][1]

其中有几个需要注意的字段

### 序号

长度是4个字节（所以范围是2的32次方-1），一个TCP连接中每个字节都是按顺序编号的，序号字段表示本报文所发送数据的第一个字节的序号。

### 确认号

确认号表示接收方期望收到对方下一个报文段第一个数据字节的序号。若确认号为N，则表明序号N-1的数据都已经正确收到了

### URG

紧急字段（urgent），表示高优先级数据，比如中断命令，会直接插入到本报文数据段的**最前面**，避免所有数据处理完后才处理。与紧急指针配合使用。

### ACK

确认字段（acknowlegment），仅当ACK=1时确认号才有效。

### PSH

推送字段（push），优先处理报文，很少使用。

### RST

复位字段（reset），当RST=1时，表示TCP连接中出现了严重错误，比如主机崩溃，必须重建连接。也可以用来拒绝以一个非法连接。

### SYN

同步字段（synchronization），在建立连接时用来同步序号。

### FIN

终止字段（finis），用来释放一个连接。

### 窗口

表示接收方允许的对方发送的数据量。

### 紧急指针

指出了紧急数据的长度。紧急数据后面是普通数据。

### 选项

SACK（选择确认），MSS（最大报文长度）等


  [1]: http://ww4.sinaimg.cn/large/77691203gw1fawgg3ka6gj20ig0c0t9o.jpg
